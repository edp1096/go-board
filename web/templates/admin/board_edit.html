<!-- web/templates/admin/board_edit.html -->
<div class="max-w-7xl mx-auto">
    <h1 class="text-2xl font-bold mb-6">게시판 수정</h1>

    <div class="bg-white shadow rounded-lg overflow-hidden">
        <form id="board-edit-form" action="/admin/boards/{{.board.ID}}" method="POST" x-data="boardEditForm">
            <input type="hidden" name="csrf_token" value="{{.csrf}}">
            <input type="hidden" name="_method" value="PUT">
            <input type="hidden" id="initial-fields" name="initial_fields" value='{{ .board.Fields | json }}'>

            <div class="p-6">
                <div class="mb-6">
                    <h2 class="text-lg font-medium text-gray-900 mb-4">기본 정보</h2>

                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700">게시판 이름 <span class="text-red-500">*</span></label>
                            <input type="text" name="name" id="name" required value="{{.board.Name}}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                        </div>

                        <div>
                            <label for="slug" class="block text-sm font-medium text-gray-700">URL 슬러그</label>
                            <input type="text" name="slug" id="slug" value="{{.board.Slug}}" readonly disabled class="mt-1 block w-full bg-gray-100 rounded-md border-gray-300 shadow-sm sm:text-sm">
                            <p class="mt-1 text-xs text-gray-500">슬러그는 수정할 수 없습니다.</p>
                        </div>

                        <div class="sm:col-span-2">
                            <label for="description" class="block text-sm font-medium text-gray-700">게시판 설명</label>
                            <textarea name="description" id="description" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">{{.board.Description}}</textarea>
                        </div>

                        <div>
                            <label for="board_type" class="block text-sm font-medium text-gray-700">게시판 유형 <span class="text-red-500">*</span></label>
                            <select name="board_type" id="board_type" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                                {{range .boardTypes}}
                                <option value="{{.}}" {{if eq . $.board.BoardType}}selected{{end}}>
                                    {{if eq . "normal"}}일반 게시판
                                    {{else if eq . "gallery"}}갤러리 게시판
                                    {{else if eq . "qna"}}질문/답변 게시판
                                    {{else}}{{.}}{{end}}
                                </option>
                                {{end}}
                            </select>
                        </div>

                        <div>
                            <div class="flex items-center">
                                <input id="active" name="active" type="checkbox" {{if .board.Active}}checked{{end}} class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <label for="active" class="ml-2 block text-sm text-gray-700">
                                    게시판 활성화
                                </label>
                            </div>
                        </div>

                        <!-- 댓글 기능 활성화 체크박스 추가 -->
                        <div>
                            <div class="flex items-center">
                                <input id="comments_enabled" name="comments_enabled" type="checkbox" {{if .board.CommentsEnabled}}checked{{end}} class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <label for="comments_enabled" class="ml-2 block text-sm text-gray-700">
                                    댓글 기능 활성화
                                </label>
                            </div>
                            <p class="mt-1 text-xs text-gray-500">이 게시판에 댓글 작성 기능을 활성화합니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 나머지 필드 관련 코드는 그대로 유지 -->
                <!-- ... -->
            </div>

            <div class="px-6 py-3 bg-gray-50 border-t border-gray-200 flex justify-between">
                <a href="/admin/boards" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                    취소
                </a>
                <button type="button" @click="submitForm()" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" :disabled="submitting">
                    <span x-show="!submitting">저장</span>
                    <span x-show="submitting" class="flex items-center">
                        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        저장 중...
                    </span>
                </button>
            </div>
        </form>
    </div>
</div>
